<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { Component } from 'react'
import Loading from '../Loading'
import GetData from '../../services/GetData'
import Hello from '../Hello'
import Activity from '../Charts/Activity'
import AverageSession from '../Charts/AverageSession'
import Performance from '../Charts/Performance'
import Score from '../Charts/Score'
import Counter from '../Counter'
import energy from "../../assets/energy.svg"
import chicken from "../../assets/chicken.svg"
import apple from "../../assets/apple.svg"
import cheeseburger from "../../assets/cheeseburger.svg"

/**
 *  Uses the GetData method to fetch the datas needed and fill the components with it
 * 
 * @class
 * @param {string} this.state.userMainData.keyData.firstName - data user's first name
 * @param {Object[]} this.state.userActivity - data user's activity
 * @param {Object[]} this.state.userAverageSessions.sessions - data user's average sessions
 * @param {Object[]} this.state.userPerformance - data user's performances
 * @param {number} this.state.userMainData.score - data user's score
 * @param {number} this.state.userMainData.todayScore - data user's score
 * @param {Object[]} this.state.userMainData.userInfos - data user's infos
 * @returns the components up to date with the needed datas from the API
 */


export default class Content extends Component {
    constructor() {
        super()
        // We initiate this.state with empty props
        this.state = {
            userMainData: {},
            userActivity: {},
            userAverageSessions: {},
            userPerformance: {},
            isLoaded: false,
        }
    }
    // We use the componentDidMount method to fetch the datas by calling the GetData function
    async componentDidMount() {
        // We use the paths provided by the API with the corresponding ID
        const mainData = await GetData(`http://localhost:3000/user/${this.props.id}`,this.props.id)
        const activity = await GetData(`http://localhost:3000/user/${this.props.id}/activity`,this.props.id)
        const averageSessions = await GetData(`http://localhost:3000/user/${this.props.id}/average-sessions`,this.props.id)
        const performance = await GetData(`http://localhost:3000/user/${this.props.id}/performance`,this.props.id)
        // We're using the fetched datas to fill the props
        this.setState({
            userMainData : mainData,
            userActivity : activity,
            userAverageSessions : averageSessions,
            userPerformance : performance,
            isLoaded: true,
        })
    }
    render () {
        return (
            // If the state of isLoaded is "true", we generate the content of the page
            this.state.isLoaded ?
                (   
                // We use the datas contained in the previous props to fill the props of the others components
                &lt;div>
                    &lt;Hello name={this.state.userMainData.keyData.firstName}/>
                    &lt;div className='content-wrapper'>
                        &lt;div className="graphs-container">
                            &lt;Activity activity={this.state.userActivity}/>
                            &lt;div className="sub-graphs-container">
                                &lt;AverageSession averageSessions={this.state.userAverageSessions.sessions}/>
                                &lt;Performance performance={this.state.userPerformance}/>
                                &lt;Score score={this.state.userMainData?.score} todayScore={this.state.userMainData?.todayScore}/>
                            &lt;/div>
                        &lt;/div>
                        &lt;div className="counter">
                        &lt;Counter 
                            picture={energy}
                            macroType="energy"
                            macro={this.state.userMainData.userInfos.calorieCount}
                            unit="kCal"
                            macroName="Calories"
                            />
                        &lt;Counter 
                            picture={chicken}
                            macroType="chicken"
                            macro={this.state.userMainData.userInfos.proteinCount}
                            unit="g"
                            macroName="Protéines"
                            />
                        &lt;Counter 
                            picture={apple}
                            macroType="apple"
                            macro={this.state.userMainData.userInfos.carbohydrateCount}
                            unit="g"
                            macroName="Glucides"
                            />
                        &lt;Counter 
                            picture={cheeseburger}
                            macroType="cheeseburger"
                            macro={this.state.userMainData.userInfos.lipidCount}
                            unit="g"
                            macroName="Lipides"
                            />
                        &lt;/div>
                    &lt;/div>
                &lt;/div>
                ) 
                : 
            &lt;Loading /> 
        )
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module.exports.html">exports</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Fri Mar 04 2022 15:35:24 GMT+0100 (heure normale d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
